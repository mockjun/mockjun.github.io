<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¬¸ì œ í’€ì´ - MockJun</title>
  <link rel="icon" href="./assets/favicon.ico" />
  <link rel="stylesheet" href="./assets/style.css">
  <script type="module" src="./components/index.js"></script>
  <script type="module" src="./apps/problem.js"></script>
  <script src="./assets/highlight.min.js"></script>
</head>
<body class="dark">
  <mock-header></mock-header>
  <mock-banner status="online"></mock-banner>

  <main>
    <section>
      <header>
        <h1 id="problem-title"></h1>
      </header>
      <div class="row">
        <span class="difficulty medium" id="problem-difficulty">
          <span aria-hidden="true">ğŸ”—</span>
          <span id="problem-source"></span>
        </span>
        <small>
          <span aria-hidden="true">ğŸ•’</span>
          <span id="problem-updated-at"></span>
        </small>
      </div>
    </section>

    <section>
      <header>
        <h2>ë¬¸ì œ ì„¤ëª…</h2>
      </header>
      <div class="description">
      </div>
    </section>

    <section>
      <header>
        <h2>ì½”ë“œ ì‘ì„±</h2>
      </header>
      <div class="column">
        <div class="two-row">
          <textarea id="code-editor" spellcheck="false" placeholder="ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”..."></textarea>
          <pre><code id="highlight-preview" class="language-javascript"></code></pre>
        </div>
        <div class="row">
          <button id="run-button" class="run-button">
            <span aria-hidden="true">â–¶ï¸</span>
            <span>ì‹¤í–‰</span>
          </button>
          <button id="share-button">
            <span aria-hidden="true">ğŸ”—</span>
            <span>ê³µìœ </span>
          </button>
          <button id="save-button" class="save-button">
            <span aria-hidden="true">ğŸ’¾</span>
            <span>ì €ì¥</span>
          </button>
          <small id="save-status"></small>
        </div>
        <div class="row">
          <small>
            <span aria-hidden="true">ğŸ”„</span>
            <span>ë¡œì»¬ì— ìë™ ì €ì¥ë¨</span>
          </small>
          <button id="reset-button">
            <span aria-hidden="true">ğŸ”„</span>
            <span>ì´ˆê¸°í™”</span>
          </button>
        </div>
      </div>
    </section>

    <section>
      <header>
        <h2>ì‹¤í–‰ ê²°ê³¼</h2>
        <div id="result-meta" class="row">
          <span class="difficulty">
            <span aria-hidden="true"></span>
            <span></span>
          </span>
          <small></small>
        </div>
      </header>
      <div id="result-container">
        <div id="result-placeholder">
          <span aria-hidden="true">â³</span>
          <span>ì•„ì§ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 'ì‹¤í–‰' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”.</span>
        </div>
        <div id="result-output" style="display: none;">
          <table>
            <caption>í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²°ê³¼</caption>
            <thead>
              <tr>
                <th>ì´ë¦„</th>
                <th>ê²°ê³¼</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <mock-footer></mock-footer>

  <script>
    const editor = document.getElementById('code-editor');
    const preview = document.getElementById('highlight-preview');
    const openBrackets = ['(', '{', '[', "\"", "'", "`"];
    const closeBrackets = [')', '}', ']', "\"", "'", "`"];
    const update = () => {
      const code = editor.value;
      preview.removeAttribute('data-highlighted');
      preview.textContent = code;
      hljs.highlightElement(preview);
    };
    editor.addEventListener('input', update);
    document.addEventListener('DOMContentLoaded', () => {
      editor.addEventListener('keydown', (e) => {
        if (e.key === 'Tab'){
          e.preventDefault();
          const input = document.activeElement;
          const start = input.selectionStart;
          const value = input.value;
          const end = input.selectionEnd;
          input.value = value.substring(0, start) + '  ' + value.substring(end);
          input.selectionStart = input.selectionEnd = start + 2;
          update();
        }
      });

      editor.addEventListener("input", (e) => {
        if (e.inputType === 'deleteContentBackward') { return; }
        const input = document.activeElement;
        const start = input.selectionStart;
        const value = input.value;
        if (openBrackets.includes(value[start - 1])) {
          const openIndex = openBrackets.indexOf(value[start - 1]);
          const closeBracket = closeBrackets[openIndex];
          input.value = value.substring(0, start) + closeBracket + value.substring(start);
          input.selectionStart = input.selectionEnd = start;
          update();
        }
      });
    });
  </script>
</body>
</html>
